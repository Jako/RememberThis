/*!
 * RememberThis - Remember List for xPDO Objects
 * Version: 2.2.3
 * Build date: 2020-06-09
 */

!function(a,e,t,i){var s="rememberThis",o={ajaxLoaderImg:"",listSelector:".rememberthis",onBeforeAdd:function(e,t,n,o,i){},onBeforeDelete:function(e,t,n,o,i){},onAfterAdd:function(e,t,n,o,i){},onAfterDelete:function(e,t,n,o,i){}};function l(e,t,n){this.options=a.extend({},o,t),this._defaults=o,this._name=s,this.$el=a(e),this.$other=a(this.options.listSelector).not(this.$el),this.init(n)}l.prototype={init:function(e){var o=this;""!==o.options.ajaxLoaderImg?o.options.loadImage=a('<img class="rememberload" alt="Loading" src="'+o.options.ajaxLoaderImg+'">'):o.options.loadImage=a('<i class="fa fa-refresh fa-spin rememberload">'),e&&(a(t).on("click",".rememberadd",function(e){e.preventDefault();var t=a(this).data("add"),n=a(this).data();delete n.add,a(this).append(o.options.loadImage.clone()),o.options.onBeforeAdd.call(o.$el,o.$other,this,t,n),o.onAdd(o.$el,o.$other,this,t,n),o.options.onAfterAdd.call(o.$el,o.$other,this,t,n)}),a(t).on("submit",".rememberaddform",function(e){e.preventDefault();var t=a(this).data("add"),n={};a.each(a(this).serializeArray(),function(e,t){n.hasOwnProperty(t.name)?("string"==typeof n[t.name]&&(n[t.name]=[n[t.name]]),n[t.name].push(t.value)):n[t.name]=t.value}),a(this).append(o.options.loadImage.clone()),o.options.onBeforeAdd.call(o.$el,o.$other,this,t,n),o.onAdd(o.$el,o.$other,this,t,n),o.options.onAfterAdd.call(o.$el,o.$other,this,t,n)})),o.$el.on("click",".rememberdelete",function(e){e.preventDefault();var t=a(this).data("delete");a(this).hide().after(o.options.loadImage.clone()),o.options.onBeforeDelete.call(o.$el,o.$other,this,t),o.onDelete(o.$el,o.$other,this,t),o.options.onAfterDelete.call(o.$el,o.$other,this,t)})},onAdd:function(n,o,e,t,i){a.ajax({type:"GET",url:this.options.connectorUrl,data:{language:this.options.language,action:"remember",add:t,addproperties:i},success:function(e){if(a(".rememberload").remove(),e.result)if(a(".rememberempty",n).length)n.slideUp("fast",function(){a(".remembercount").html(e.count),a(this).html(e.result).slideDown("slow")}),o.length&&o.each(function(){a(this).slideUp("fast",function(){a(this).html(a.trim(e.result)).slideDown("slow")})});else{var t=a(e.result).attr("style","display: none");n.append(t),a(".remembercount").html(e.count),o.length&&o.each(function(){var e=t.clone();a(this).append(e),e.slideDown("slow")}),t.slideDown("slow")}e.debug&&a(".rememberdebug").html(e.debug)}})},onDelete:function(o,i,s,e){a.ajax({type:"GET",url:this.options.connectorUrl,data:{language:this.options.language,action:"remember",delete:e},success:function(e){if(e.count&&"0"!==e.count){var t=a(s).parent(),n=t.index();t.slideUp("slow",function(){a(".remembercount").html(e.count),a(this).remove()}),i.length&&i.each(function(){a(this).children().eq(n).slideUp("slow",function(){a(this).remove()})})}else o.slideUp("slow",function(){a(".remembercount").html(e.count),a(this).html(a.trim(e.result)).slideDown("fast")}),i.length&&i.each(function(){a(this).slideUp("slow",function(){a(this).html(a.trim(e.result)).slideDown("fast")})});e.debug&&a(".rememberdebug").html(e.debug)}})}},a.fn[s]=function(t){var n,o=arguments;if(t===i||"object"==typeof t){var e=!0;return this.each(function(){a.data(this,"plugin_"+s)||a.data(this,"plugin_"+s,new l(this,t,e)),e=!1})}if("string"==typeof t&&"_"!==t[0]&&"init"!==t)return this.each(function(){var e=a.data(this,"plugin_"+s);e instanceof l&&"function"==typeof e[t]&&(n=e[t].apply(e,Array.prototype.slice.call(o,1))),"destroy"===t&&a.data(this,"plugin_"+s,null)}),n!==i?n:this}}(jQuery,window,document);